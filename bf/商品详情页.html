<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>商品详情页</title>
    <link rel="stylesheet" href="css/common.css" type="text/css"/>
    <link rel="stylesheet" href="css/index.css" type="text/css"/>
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="js/index.js" type="text/javascript"></script>


    <!--<script src="js/sku/json2.js" type="text/javascript"></script>
    <script src="js/sku/shCore.js" type="text/javascript"></script>
    <script src="js/sku/shBrushJScript.js" type="text/javascript"></script>-->

</head>
<body>
<!--top-->
<div class="top">
    <div class="wrap1226">
        <ul class="fr">
            <li>张小菜<i class="top_down"></i></li>
            <li class="borderL">我的订单</li>
        </ul>
    </div>
</div>
<!--top end-->
<!--nav-->
<div class="nav">
    <div class="navContent">
        <ul class="fl">
            <li><a href="#" class="atop"><img src="images/logo.png" alt="暴风logo"/></a></li>
            <li>暴风商城</li>
        </ul>
    </div>
</div>
<!--nav end-->
<!--littleNav-->
<div class="littleNav">
    <div class="littleNavCenter">
        <span><a href="#"><b>暴风商城</b></a></span><em></em><span><a href="#">智能电视</a></span><em></em><span>暴风超体电视</span>
    </div>
</div>
<!--littleNav end-->
<!--mainBox-->
<div class="main">
    <!--mainCenter-->
    <div class="mainCenter">
        <div class="goodsMain">
            <div class="goodsMainLeft">
                <div class="large_box">
                    <ul>
                        <li>
                            <img src="images/tvbig1.jpg">
                        </li>
                        <li>
                            <img src="images/tvbig2.jpg">
                        </li>
                        <li>
                            <img src="images/tvbig3.jpg">
                        </li>
                        <li>
                            <img src="images/tvbig4.jpg">
                        </li>
                        <li>
                            <img src="images/tvbig5.jpg">
                        </li>
                        <li>
                            <img src="images/tvbig1.jpg">
                        </li>
                    </ul>
                </div>
                <div class="small_box">
                    <span class="btn left_btn"></span>
                    <div class="small_list">
                        <ul>
                            <li class="on">
                                <img src="images/tvSmall1.jpg">
                                <div class="bun_bg"></div>
                            </li>
                            <li>
                                <img src="images/tvSmall2.jpg">
                            </li>
                            <li>
                                <img src="images/tvSmall3.jpg">
                            </li>
                            <li>
                                <img src="images/tvSmall4.jpg">
                            </li>
                            <li>
                                <img src="images/tvSmall5.jpg">
                            </li>
                            <li>
                                <img src="images/tvSmall1.jpg">
                            </li>
                        </ul>
                    </div>
                    <span class="btn right_btn"></span>
                </div>
            </div>
            <div class="goodsMainRight">
                <div class="name">
                    <h1>暴风超体电视F1</h1>
                    <p>分体电视，永不过时</p>
                </div>
                <div class="price">
                    <div class="dt">暴风价</div>
                    <div class="dd"><span id="price">￥1999.00-5999.00</span> <em>原价：￥3299.00</em></div>
                </div>
                <div style="display: none"></div>
                <div class="items chooseColor chooseItem">
                    <div class="itemsLeft">选择颜色</div>
                    <div class="itemsRight">
                        <ul>
                            <li class="sku"  attr_id="1">玫瑰金</li>
                            <li class="sku"  attr_id="2">黑色</li>
                            <li class="sku"  attr_id="3">白色</li>
                        </ul>
                    </div>
                </div>
                <div class="items chooseSize chooseItem">
                    <div class="itemsLeft">选择尺寸</div>
                    <div class="itemsRight">
                        <ul>
                            <li class="sku" attr_id="5">40英寸</li>
                            <li class="sku" attr_id="6">42英寸</li>
                            <li class="sku" attr_id="7">50英寸</li>
                        </ul>
                    </div>
                </div>
                <div class="items chooseSize chooseItem chooseR">
                    <div class="itemsLeft">选择容量</div>
                    <div class="itemsRight">
                        <ul>
                            <li class="sku" attr_id="5">16G</li>
                            <li class="sku" attr_id="6">32G</li>
                            <li class="sku" attr_id="7">64G</li>
                        </ul>
                    </div>
                </div>
                <div class="items chooseSize">
                    <div class="itemsLeft">选择数量</div>
                    <div class="itemsRight">
                        <div class="quantity-form">
                            <span  class="decrement" >－</span>
                            <input type="text" id="buy-num" name="applyNum" value="1" class="text text01">
                            <span  class="increment">＋</span>
                        </div>
                    </div>
                </div>
                <div class="price total">
                    <div class="dt">小计</div>
                    <div class="dd"><span>￥5998.00</span><a href="#">立即购买</a></div>
                </div>
            </div>
        </div>
    </div>
    <!--mainCenter end-->
    <!--goodsInfo-->
    <div class="goodsInfo">
        <div class="outer">
            <div class="innerList">
                <ul class="ulList">
                    <li class="on">商品介绍</li>
                    <li>评价晒单</li>
                </ul>
            </div>
            <div class="innerBox on">
                <div class="picture">
                    <img src="images/TV.jpg" />
                    <img src="images/TV2.jpg" />
                </div>
            </div>
            <div class="innerBox">
                <div class="comment">
                    <div class="rate">
                        <strong>99<em>%</em></strong>
                        <br/>
                        <span>好评度</span>
                    </div>
                    <div class="percent">
                        <dl>
                            <dt>好评</dt>
                            <dd><div style="width: 227px;"></div></dd>
                        </dl>
                        <dl>
                            <dt>中评</span></dt>
                            <dd><div style="width: 69px;"></div></dd>
                        </dl>
                        <dl>
                            <dt>差评</dt>
                            <dd><div style="width: 5px;"></div></dd>
                        </dl>
                    </div>
                    <div class="weFeel">
                        <p>大家觉得</p>
                        <ul>
                            <li>画面清晰（37）</li>
                            <li>性价比高（37）</li>
                            <li>工艺精湛（37）</li>
                            <li>操作方便（37）</li>
                            <li>外观漂亮（37）</li>
                            <li>内容丰富（37）</li>
                        </ul>
                    </div>
                </div>
                <div class="comments-list">
                    <div class="mt">
                        <ul class="mtList">
                            <li class="on"><a href="#none">全部评价<em>(359)</em></a></li>
                            <li><a href="#none">好评<em>(351)</em></a></li>
                            <li><a href="#none">中评<em>(359)</em></a></li>
                            <li><a href="#none">差评<em>(2)</em></a></li>
                            <li><a href="#none">晒单<em>(78)</em></a></li>
                        </ul>
                        <div class="clear"></div>
                    </div>
                    <div class="mc on">
                        <div class="mcListBox">
                            <div class="mcList">
                                <div class="mcListContent">
                                    <div class="mcListLeft">
                                        <div class="perImg">
                                            <img src="images/per.png"/>
                                            <p>158XXXX875_</p>
                                        </div>
                                    </div>
                                    <div class="mcListCenter">
                                        <div class="score"><img src="images/score.png"/></div>
                                        <p>
                                            电视看着还不错，就是只送一个月会员太少了。分体电视的设计很不错，到时候有什么更新，只需要换主机部分，不需要换显示屏。
                                            玫瑰色的金属边框是挺好看的，就是搭起来比较麻烦。
                                        </p>
                                    </div>
                                    <div class="mcListRight">
                                        <p>发表于 2016-03-21 18:49:03</p>
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <div class="help"><img src="images/help.png"/></div>
                            </div>
                            <div class="mcList">
                                <div class="mcListContent">
                                    <div class="mcListLeft">
                                        <div class="perImg">
                                            <img src="images/per.png"/>
                                            <p>158XXXX875_</p>
                                        </div>
                                    </div>
                                    <div class="mcListCenter">
                                        <div class="score"><img src="images/score.png"/></div>
                                        <p>
                                            电视看着还不错，就是只送一个月会员太少了。分体电视的设计很不错，到时候有什么更新，只需要换主机部分，不需要换显示屏。
                                            玫瑰色的金属边框是挺好看的，就是搭起来比较麻烦。
                                        </p>
                                        <div class="answer">
                                            <p>
                                                <a href="#none">北京暴风TV旗舰店:</a>感谢购买暴风超体电视，我们一直在努力提升服务品质和产品使用体验，您的反馈是对我们最给力的支持！我们
                                                的会员也是性价比很高的，详情可以前往暴风TV官方网站了解。
                                            </p>
                                        </div>
                                    </div>
                                    <div class="mcListRight">
                                        <p>发表于 2016-03-21 18:49:03</p>
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <div class="help"><img src="images/help.png"/></div>
                            </div>
                            <div class="mcList">
                                <div class="mcListContent">
                                    <div class="mcListLeft">
                                        <div class="perImg">
                                            <img src="images/per.png"/>
                                            <p>158XXXX875_</p>
                                        </div>
                                    </div>
                                    <div class="mcListCenter">
                                        <div class="score"><img src="images/score.png"/></div>
                                        <p>
                                            电视看着还不错，就是只送一个月会员太少了。分体电视的设计很不错，到时候有什么更新，只需要换主机部分，不需要换显示屏。
                                            玫瑰色的金属边框是挺好看的，就是搭起来比较麻烦。
                                        </p>
                                        <div class="answer">
                                            <p>
                                                <a href="#none">北京暴风TV旗舰店:</a>感谢购买暴风超体电视，我们一直在努力提升服务品质和产品使用体验，您的反馈是对我们最给力的支持！我们
                                                的会员也是性价比很高的，详情可以前往暴风TV官方网站了解。
                                            </p>
                                        </div>
                                    </div>
                                    <div class="mcListRight">
                                        <p>发表于 2016-03-21 18:49:03</p>
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <div class="help"><img src="images/help.png"/></div>
                            </div>
                        </div>
                        <!--page-->
                        <div class="page">
                            <div class="pageCon">
                                <span id="prev" class="noPage">&lt;</span>
                                <ul class="pageList">
                                    <li class="on" id="first">1</li>
                                    <li>2</li>
                                    <li>3</li>
                                    <li>4</li>
                                    <li>5</li>
                                    <li>6</li>
                                    <li id="more">...</li>
                                    <li id="last">21</li>
                                </ul>
                                <span id="next">&gt;</span>
                            </div>
                        </div>
                        <!--page end-->
                    </div>
                    <div class="mc">
                        <div class="mcListBox">
                            <div class="mcList">
                                <div class="mcListContent">
                                    <div class="mcListLeft">
                                        <div class="perImg">
                                            <img src="images/per.png"/>
                                            <p>158XXXX875_</p>
                                        </div>
                                    </div>
                                    <div class="mcListCenter">
                                        <div class="score"><img src="images/score.png"/></div>
                                        <p>
                                            电视看着还不错，就是只送一个月会员太少了。分体电视的设计很不错，到时候有什么更新，只需要换主机部分，不需要换显示屏。
                                            玫瑰色的金属边框是挺好看的，就是搭起来比较麻烦。
                                        </p>
                                        <div class="answer">
                                            <p>
                                                <a href="#none">北京暴风TV旗舰店:</a>感谢购买暴风超体电视，我们一直在努力提升服务品质和产品使用体验，您的反馈是对我们最给力的支持！我们
                                                的会员也是性价比很高的，详情可以前往暴风TV官方网站了解。
                                            </p>
                                        </div>
                                    </div>
                                    <div class="mcListRight">
                                        <p>发表于 2016-03-21 18:49:03</p>
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <div class="help"><img src="images/help.png"/></div>
                            </div>
                            <div class="mcList">
                                <div class="mcListContent">
                                    <div class="mcListLeft">
                                        <div class="perImg">
                                            <img src="images/per.png"/>
                                            <p>158XXXX875_</p>
                                        </div>
                                    </div>
                                    <div class="mcListCenter">
                                        <div class="score"><img src="images/score.png"/></div>
                                        <p>
                                            电视看着还不错，就是只送一个月会员太少了。分体电视的设计很不错，到时候有什么更新，只需要换主机部分，不需要换显示屏。
                                            玫瑰色的金属边框是挺好看的，就是搭起来比较麻烦。
                                        </p>
                                        <div class="answer">
                                            <p>
                                                <a href="#none">北京暴风TV旗舰店:</a>感谢购买暴风超体电视，我们一直在努力提升服务品质和产品使用体验，您的反馈是对我们最给力的支持！我们
                                                的会员也是性价比很高的，详情可以前往暴风TV官方网站了解。
                                            </p>
                                        </div>
                                    </div>
                                    <div class="mcListRight">
                                        <p>发表于 2016-03-21 18:49:03</p>
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <div class="help"><img src="images/help.png"/></div>
                            </div>
                        </div>
                        <!--page-->
                        <div class="page">
                            <div class="pageCon">
                                <span id="prev" class="noPage">&lt;</span>
                                <ul class="pageList">
                                    <li class="on" id="first">1</li>
                                    <li>2</li>
                                    <li>3</li>
                                    <li>4</li>
                                    <li>5</li>
                                    <li>6</li>
                                    <li id="more">...</li>
                                    <li id="last">21</li>
                                </ul>
                                <span id="next">&gt;</span>
                            </div>
                        </div>
                        <!--page end-->
                    </div>
                    <div class="mc">
                        <div class="mcListBox">
                            <div class="mcList">
                                <div class="mcListContent">
                                    <div class="mcListLeft">
                                        <div class="perImg">
                                            <img src="images/per.png"/>
                                            <p>158XXXX875_</p>
                                        </div>
                                    </div>
                                    <div class="mcListCenter">
                                        <div class="score"><img src="images/score.png"/></div>
                                        <p>
                                            电视看着还不错，就是只送一个月会员太少了。分体电视的设计很不错，到时候有什么更新，只需要换主机部分，不需要换显示屏。
                                            玫瑰色的金属边框是挺好看的，就是搭起来比较麻烦。
                                        </p>
                                    </div>
                                    <div class="mcListRight">
                                        <p>发表于 2016-03-21 18:49:03</p>
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <div class="help"><img src="images/help.png"/></div>
                            </div>
                            <div class="mcList">
                                <div class="mcListContent">
                                    <div class="mcListLeft">
                                        <div class="perImg">
                                            <img src="images/per.png"/>
                                            <p>158XXXX875_</p>
                                        </div>
                                    </div>
                                    <div class="mcListCenter">
                                        <div class="score"><img src="images/score.png"/></div>
                                        <p>
                                            电视看着还不错，就是只送一个月会员太少了。分体电视的设计很不错，到时候有什么更新，只需要换主机部分，不需要换显示屏。
                                            玫瑰色的金属边框是挺好看的，就是搭起来比较麻烦。
                                        </p>
                                        <div class="answer">
                                            <p>
                                                <a href="#none">北京暴风TV旗舰店:</a>感谢购买暴风超体电视，我们一直在努力提升服务品质和产品使用体验，您的反馈是对我们最给力的支持！我们
                                                的会员也是性价比很高的，详情可以前往暴风TV官方网站了解。
                                            </p>
                                        </div>
                                    </div>
                                    <div class="mcListRight">
                                        <p>发表于 2016-03-21 18:49:03</p>
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <div class="help"><img src="images/help.png"/></div>
                            </div>
                        </div>
                        <!--page-->
                        <div class="page">
                            <div class="pageCon">
                                <span id="prev" class="noPage">&lt;</span>
                                <ul class="pageList">
                                    <li class="on" id="first">1</li>
                                    <li>2</li>
                                    <li>3</li>
                                    <li>4</li>
                                    <li>5</li>
                                    <li>6</li>
                                    <li id="more">...</li>
                                    <li id="last">21</li>
                                </ul>
                                <span id="next">&gt;</span>
                            </div>
                        </div>
                        <!--page end-->
                    </div>
                    <div class="mc">
                        <div class="mcListBox">
                            <div class="mcList">
                                <div class="mcListContent">
                                    <div class="mcListLeft">
                                        <div class="perImg">
                                            <img src="images/per.png"/>
                                            <p>158XXXX875_</p>
                                        </div>
                                    </div>
                                    <div class="mcListCenter">
                                        <div class="score"><img src="images/score.png"/></div>
                                        <p>
                                            电视看着还不错，就是只送一个月会员太少了。分体电视的设计很不错，到时候有什么更新，只需要换主机部分，不需要换显示屏。
                                            玫瑰色的金属边框是挺好看的，就是搭起来比较麻烦。
                                        </p>
                                    </div>
                                    <div class="mcListRight">
                                        <p>发表于 2016-03-21 18:49:03</p>
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <div class="help"><img src="images/help.png"/></div>
                            </div>
                            <div class="mcList">
                                <div class="mcListContent">
                                    <div class="mcListLeft">
                                        <div class="perImg">
                                            <img src="images/per.png"/>
                                            <p>158XXXX875_</p>
                                        </div>
                                    </div>
                                    <div class="mcListCenter">
                                        <div class="score"><img src="images/score.png"/></div>
                                        <p>
                                            电视看着还不错，就是只送一个月会员太少了。分体电视的设计很不错，到时候有什么更新，只需要换主机部分，不需要换显示屏。
                                            玫瑰色的金属边框是挺好看的，就是搭起来比较麻烦。
                                        </p>
                                        <div class="answer">
                                            <p>
                                                <a href="#none">北京暴风TV旗舰店:</a>感谢购买暴风超体电视，我们一直在努力提升服务品质和产品使用体验，您的反馈是对我们最给力的支持！我们
                                                的会员也是性价比很高的，详情可以前往暴风TV官方网站了解。
                                            </p>
                                        </div>
                                    </div>
                                    <div class="mcListRight">
                                        <p>发表于 2016-03-21 18:49:03</p>
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <div class="help"><img src="images/help.png"/></div>
                            </div>
                            <div class="mcList">
                                <div class="mcListContent">
                                    <div class="mcListLeft">
                                        <div class="perImg">
                                            <img src="images/per.png"/>
                                            <p>158XXXX875_</p>
                                        </div>
                                    </div>
                                    <div class="mcListCenter">
                                        <div class="score"><img src="images/score.png"/></div>
                                        <p>
                                            电视看着还不错，就是只送一个月会员太少了。分体电视的设计很不错，到时候有什么更新，只需要换主机部分，不需要换显示屏。
                                            玫瑰色的金属边框是挺好看的，就是搭起来比较麻烦。
                                        </p>
                                        <div class="answer">
                                            <p>
                                                <a href="#none">北京暴风TV旗舰店:</a>感谢购买暴风超体电视，我们一直在努力提升服务品质和产品使用体验，您的反馈是对我们最给力的支持！我们
                                                的会员也是性价比很高的，详情可以前往暴风TV官方网站了解。
                                            </p>
                                        </div>
                                    </div>
                                    <div class="mcListRight">
                                        <p>发表于 2016-03-21 18:49:03</p>
                                    </div>
                                </div>
                                <div class="clear"></div>
                                <div class="help"><img src="images/help.png"/></div>
                            </div>
                        </div>
                        <!--page-->
                        <div class="page">
                            <div class="pageCon">
                                <span id="prev" class="noPage">&lt;</span>
                                <ul class="pageList">
                                    <li class="on" id="first">1</li>
                                    <li>2</li>
                                    <li>3</li>
                                    <li>4</li>
                                    <li>5</li>
                                    <li>6</li>
                                    <li id="more">...</li>
                                    <li id="last">21</li>
                                </ul>
                                <span id="next">&gt;</span>
                            </div>
                        </div>
                        <!--page end-->
                    </div>
                    <div class="mc"><img src="images/tvbig3.jpg" alt=""/></div>
                </div>
            </div>
        </div>
    </div>
    <!--goodsInfo end-->
</div>
<!--mainBox end-->
<script src="js/carousel.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function(){
        /* 商品轮播图（带缩略图的轮播效果） */
        $(".goodsMainLeft").thumbnailImg({
            large_elem: ".large_box",
            small_elem: ".small_list",
            left_btn: ".left_btn",
            right_btn: ".right_btn"
        });
    });
</script>
<script>
    var data={
        "1;5;6":{"price":"2999.00", "skuId": "11", "count": "2"},
        "1;6;5":{"price":"2999.00", "skuId": "13", "count": "6"},
        "1;6;6":{"price":"3000.00", "skuId": "14", "count": "2"},
        "1;7;5":{"price":"4999.00", "skuId": "16", "count": "4"},
        "2;5;5":{"price":"1999.00", "skuId": "20", "count": "2"},
        "2;5;7":{"price":"2999.89", "skuId": "22", "count": "3"},
        "2;6;5":{"price":"3999.59", "skuId": "23", "count": "2"},
        "2;6;7":{"price":"3000.00", "skuId": "25", "count": "2"},
        "2;7;7":{"price":"3999.59", "skuId": "28", "count": "2"},
        "3;5;5":{"price":"3000.00", "skuId": "30", "count": "2"},
        "3;5;6":{"price":"1999.00", "skuId": "31", "count": "2"},
        "3;5;7":{"price":"1999.00", "skuId": "32", "count": "2"},
        "3;6;5":{"price":"3999.59", "skuId": "33", "count": "2"},
        "3;7;5":{"price":"1999.00", "skuId": "36", "count": "2"},
        "3;7;7":{"price":"3999.59", "skuId": "38", "count": "2"}
    };

    //保存最后的组合结果信息
    var SKUResult = {};
    //获得对象的key
    function getObjKeys(obj) {
        if (obj !== Object(obj)) throw new TypeError('Invalid object');
        var keys = [];
        for (var key in obj)
            if (Object.prototype.hasOwnProperty.call(obj, key))
                keys[keys.length] = key;
        return keys;
    }

    //把组合的key放入结果集SKUResult
    function add2SKUResult(combArrItem, sku) {
        var key = combArrItem.join(";");
        if(SKUResult[key]) {//SKU信息key属性·
            SKUResult[key].count += sku.count;
            SKUResult[key].prices.push(sku.price);
        } else {
            SKUResult[key] = {
                count : sku.count,
                prices : [sku.price]
            };
        }
    }


    //初始化得到结果集
    function initSKU() {
        var i, j, skuKeys = getObjKeys(data);
        for(i = 0; i < skuKeys.length; i++) {
            var skuKey = skuKeys[i];//一条SKU信息key
            var sku = data[skuKey];	//一条SKU信息value
            var skuKeyAttrs = skuKey.split(";"); //SKU信息key属性值数组
            skuKeyAttrs.sort(function(value1, value2) {
                return parseInt(value1) - parseInt(value2);

            });

            //对每个SKU信息key属性值进行拆分组合
            var combArr = combInArray(skuKeyAttrs);
            for(j = 0; j < combArr.length; j++) {
                add2SKUResult(combArr[j], sku);
            }

            //结果集接放入SKUResult
            SKUResult[skuKeyAttrs.join(";")] = {
                count:sku.count,
                prices:[sku.price]
            }
        }
    }

    /**
     * 从数组中生成指定长度的组合
     * 方法: 先生成[0,1...]形式的数组, 然后根据0,1从原数组取元素，得到组合数组
     */
    function combInArray(aData) {
        if(!aData || !aData.length) {
            return [];
        }

        var len = aData.length;
        var aResult = [];

        for(var n = 1; n < len; n++) {
            var aaFlags = getCombFlags(len, n);
            while(aaFlags.length) {
                var aFlag = aaFlags.shift();
                var aComb = [];
                for(var i = 0; i < len; i++) {
                    aFlag[i] && aComb.push(aData[i]);
                }
                aResult.push(aComb);
            }
        }

        return aResult;
    }


    /**
     * 得到从 m 元素中取 n 元素的所有组合
     * 结果为[0,1...]形式的数组, 1表示选中，0表示不选
     */
    function getCombFlags(m, n) {
        if(!n || n < 1) {
            return [];
        }

        var aResult = [];
        var aFlag = [];
        var bNext = true;
        var i, j, iCnt1;

        for (i = 0; i < m; i++) {
            aFlag[i] = i < n ? 1 : 0;
        }

        aResult.push(aFlag.concat());

        while (bNext) {
            iCnt1 = 0;
            for (i = 0; i < m - 1; i++) {
                if (aFlag[i] == 1 && aFlag[i+1] == 0) {
                    for(j = 0; j < i; j++) {
                        aFlag[j] = j < iCnt1 ? 1 : 0;
                    }
                    aFlag[i] = 0;
                    aFlag[i+1] = 1;
                    var aTmp = aFlag.concat();
                    aResult.push(aTmp);
                    if(aTmp.slice(-n).join("").indexOf('0') == -1) {
                        bNext = false;
                    }
                    break;
                }
                aFlag[i] == 1 && iCnt1++;
            }
        }
        return aResult;
    }

    //初始化用户选择事件
    $(function() {
        initSKU();
        $('.sku').each(function() {
            var self = $(this);
            var attr_id = self.attr('attr_id');
            if(!SKUResult[attr_id]) {
                //self.attr('disabled', 'disabled');
                self.addClass("disable");
            }
        }).click(function() {
            var self = $(this);
            if(self.hasClass("disable")){
                return false;
            }
            //选中自己，兄弟节点取消选中
            self.addClass('choose').siblings().removeClass('choose');

            //已经选择的节点
            var selectedObjs = $('.choose');

            if(selectedObjs.length) {
                //获得组合key价格
                var selectedIds = [];
                selectedObjs.each(function() {
                    selectedIds.push($(this).attr('attr_id'));
                });
                selectedIds.sort(function(value1, value2) {
                    return parseInt(value1) - parseInt(value2);
                });
                var len = selectedIds.length;
                var prices = SKUResult[selectedIds.join(';')].prices;
                var maxPrice = Math.max.apply(Math, prices);
                var minPrice = Math.min.apply(Math, prices);
                $('#price').text(maxPrice > minPrice ? minPrice + "-" + maxPrice : maxPrice);

                //用已选中的节点验证待测试节点 underTestObjs
                $(".sku").not(selectedObjs).not(self).each(function() {
                    var siblingsSelectedObj = $(this).siblings('.choose');
                    var testAttrIds = [];//从选中节点中去掉选中的兄弟节点
                    if(siblingsSelectedObj.length) {
                        var siblingsSelectedObjId = siblingsSelectedObj.attr('attr_id');
                        for(var i = 0; i < len; i++) {
                            (selectedIds[i] != siblingsSelectedObjId) && testAttrIds.push(selectedIds[i]);
                        }
                    } else {
                        testAttrIds = selectedIds.concat();
                    }
                    testAttrIds = testAttrIds.concat($(this).attr('attr_id'));
                    testAttrIds.sort(function(value1, value2) {
                        return parseInt(value1) - parseInt(value2);
                    });
                    if(!SKUResult[testAttrIds.join(';')]) {
                        //$(this).attr('disabled', 'disabled').removeClass('choose');
                        $(this).addClass("disable").removeClass('choose');
                    } else {
                        //$(this).removeAttr('disabled');
                        $(this).removeClass('disable');
                    }
                });
            } else {
                //设置默认价格
                $('#price').text('--');
                //设置属性状态
                $('.sku').each(function() {
                    //SKUResult[$(this).attr('attr_id')] ? $(this).removeAttr('disabled') : $(this).attr('disabled', 'disabled').removeClass('choose');
                    SKUResult[$(this).attr('attr_id')] ? $(this).removeClass('disable') : $(this).addClass('disable').removeClass('choose');
                })
            }
        });
    });








































    /*       $(".chooseItem li").on("click",function() {
     if ($(this).hasClass("disable")) {
     return false;
     }
     $(this).hasClass("choose") ? $(this).siblings().removeClass("choose") : $(this).addClass("choose").siblings().removeClass("choose");




     });*/






</script>
</body>
</html>